<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dezibel-Umrechner</title>
    <style>
        * { box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f0dcd0 0%, #e0c8b8 100%);
            padding: 20px;
            min-height: 100vh;
        }
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 10px;
            font-size: 2.5em;
        }
        .description {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 1.1em;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }
        .info-box {
            background: #fff3cd;
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 20px;
            border-left: 4px solid #ff9800;
        }
        .info-box p {
            margin: 5px 0;
            color: #666;
            line-height: 1.5;
        }
        .calculator-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        .calc-section {
            background: #fafafa;
            padding: 20px;
            border-radius: 8px;
            border: 2px solid #e0e0e0;
        }
        .calc-section h3 {
            color: #333;
            margin: 0 0 15px 0;
            text-align: center;
            font-size: 1.1em;
        }
        .calc-section.amplitude {
            border-color: #3498db;
        }
        .calc-section.power {
            border-color: #e74c3c;
        }
        .input-group {
            margin: 12px 0;
        }
        .input-group label {
            display: block;
            font-size: 13px;
            color: #666;
            margin-bottom: 5px;
            font-weight: 500;
        }
        .input-group input {
            width: 100%;
            padding: 8px;
            font-size: 15px;
            border: 2px solid #ddd;
            border-radius: 4px;
        }
        .input-group input:focus {
            outline: none;
            border-color: #3498db;
        }
        .result-box {
            background: white;
            padding: 12px;
            border-radius: 6px;
            margin: 10px 0;
            border-left: 4px solid #27ae60;
        }
        .result-box .label {
            font-size: 12px;
            color: #7f8c8d;
            margin-bottom: 3px;
        }
        .result-box .value {
            font-size: 18px;
            font-weight: 600;
            color: #27ae60;
        }
        .formula-box {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 6px;
            text-align: center;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            margin: 10px 0;
            color: #666;
            border: 1px solid #ddd;
        }
        .quick-ref {
            margin: 25px 0;
            background: #fff8f0;
            padding: 20px;
            border-radius: 8px;
            border: 2px solid #f39c12;
        }
        .quick-ref h3 {
            color: #e67e22;
            margin: 0 0 15px 0;
            font-size: 1.1em;
        }
        .ref-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 10px;
        }
        .ref-card {
            background: #fff;
            padding: 12px;
            border-radius: 6px;
            border-left: 4px solid #9b59b6;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .ref-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 3px 8px rgba(0,0,0,0.15);
        }
        .ref-card .db-value {
            font-size: 18px;
            font-weight: 600;
            color: #9b59b6;
            margin-bottom: 5px;
        }
        .ref-card .ref-desc {
            font-size: 11px;
            color: #666;
            line-height: 1.3;
        }
        .back-link {
            text-align: center;
            margin-top: 25px;
        }
        .back-link a {
            color: #3498db;
            text-decoration: none;
            font-weight: 500;
        }
        .back-link a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <h1>Dezibel-Umrechner</h1>
    <div class="description">Interaktive Umrechnung zwischen linearen Werten und Dezibel</div>

    <div class="container">
        <div class="info-box">
            <p><strong>Feldgrößen (links):</strong> Spannung, Strom, Schalldruck → 20·log₁₀</p>
            <p><strong>Leistung (rechts):</strong> Elektrische/akustische Leistung → 10·log₁₀</p>
        </div>

        <div class="calculator-grid">
            <!-- Amplitude Calculator -->
            <div class="calc-section amplitude">
                <h3>Feldgrößen</h3>

                <div class="formula-box">
                    L<sub>dB</sub> = 20 · log<sub>10</sub>(A / A<sub>0</sub>)
                </div>

                <div class="input-group">
                    <label>Feldgröße A:</label>
                    <input type="number" id="amp-linear" placeholder="z.B. 2.0" step="any">
                </div>

                <div class="input-group">
                    <label>Referenz A₀:</label>
                    <input type="number" id="amp-ref" value="1" step="any">
                </div>

                <div class="input-group">
                    <label>Pegel in dB:</label>
                    <input type="number" id="amp-db" placeholder="z.B. 6.0" step="any">
                </div>

                <div class="result-box">
                    <div class="label">Verhältnis A/A₀</div>
                    <div class="value" id="amp-ratio">1.00</div>
                </div>
            </div>

            <!-- Power Calculator -->
            <div class="calc-section power">
                <h3>Leistung</h3>

                <div class="formula-box">
                    L<sub>dB</sub> = 10 · log<sub>10</sub>(P / P<sub>0</sub>)
                </div>

                <div class="input-group">
                    <label>Leistung P:</label>
                    <input type="number" id="pow-linear" placeholder="z.B. 4.0" step="any">
                </div>

                <div class="input-group">
                    <label>Referenz P₀:</label>
                    <input type="number" id="pow-ref" value="1" step="any">
                </div>

                <div class="input-group">
                    <label>Pegel in dB:</label>
                    <input type="number" id="pow-db" placeholder="z.B. 6.0" step="any">
                </div>

                <div class="result-box">
                    <div class="label">Verhältnis P/P₀</div>
                    <div class="value" id="pow-ratio">1.00</div>
                </div>
            </div>
        </div>

        <div class="quick-ref">
            <h3>Schnellreferenz (klicken zum Eintragen)</h3>
            <div class="ref-grid">
                <div class="ref-card" onclick="setDB(20)">
                    <div class="db-value">+20 dB</div>
                    <div class="ref-desc">Feld: ×10<br>Leist: ×100</div>
                </div>
                <div class="ref-card" onclick="setDB(6)">
                    <div class="db-value">+6 dB</div>
                    <div class="ref-desc">Feld: ×2<br>Leist: ×4</div>
                </div>
                <div class="ref-card" onclick="setDB(3)">
                    <div class="db-value">+3 dB</div>
                    <div class="ref-desc">Feld: ×1.41<br>Leist: ×2</div>
                </div>
                <div class="ref-card" onclick="setDB(0)">
                    <div class="db-value">0 dB</div>
                    <div class="ref-desc">Referenz<br>×1</div>
                </div>
                <div class="ref-card" onclick="setDB(-3)">
                    <div class="db-value">-3 dB</div>
                    <div class="ref-desc">Feld: ×0.71<br>Leist: ÷2</div>
                </div>
                <div class="ref-card" onclick="setDB(-6)">
                    <div class="db-value">-6 dB</div>
                    <div class="ref-desc">Feld: ÷2<br>Leist: ÷4</div>
                </div>
                <div class="ref-card" onclick="setDB(-20)">
                    <div class="db-value">-20 dB</div>
                    <div class="ref-desc">Feld: ÷10<br>Leist: ÷100</div>
                </div>
            </div>
        </div>

        <div class="back-link">
            <a href="index.html">← Zurück zur Übersicht</a>
        </div>
    </div>

    <script>
        // Amplitude calculator
        const ampLinear = document.getElementById('amp-linear');
        const ampRef = document.getElementById('amp-ref');
        const ampDB = document.getElementById('amp-db');
        const ampRatio = document.getElementById('amp-ratio');

        // Power calculator
        const powLinear = document.getElementById('pow-linear');
        const powRef = document.getElementById('pow-ref');
        const powDB = document.getElementById('pow-db');
        const powRatio = document.getElementById('pow-ratio');

        let updateInProgress = false;

        // Amplitude calculations
        ampLinear.addEventListener('input', () => {
            if (updateInProgress) return;
            updateInProgress = true;

            const A = parseFloat(ampLinear.value);
            const A0 = parseFloat(ampRef.value) || 1;

            if (!isNaN(A) && A > 0 && A0 > 0) {
                const db = 20 * Math.log10(A / A0);
                const ratio = A / A0;

                ampDB.value = db.toFixed(2);
                ampRatio.textContent = ratio.toFixed(4);
            }

            updateInProgress = false;
        });

        ampRef.addEventListener('input', () => {
            if (ampLinear.value) ampLinear.dispatchEvent(new Event('input'));
        });

        ampDB.addEventListener('input', () => {
            if (updateInProgress) return;
            updateInProgress = true;

            const db = parseFloat(ampDB.value);
            const A0 = parseFloat(ampRef.value) || 1;

            if (!isNaN(db) && A0 > 0) {
                const ratio = Math.pow(10, db / 20);
                const A = ratio * A0;

                ampLinear.value = A.toFixed(6);
                ampRatio.textContent = ratio.toFixed(4);
            }

            updateInProgress = false;
        });

        // Power calculations
        powLinear.addEventListener('input', () => {
            if (updateInProgress) return;
            updateInProgress = true;

            const P = parseFloat(powLinear.value);
            const P0 = parseFloat(powRef.value) || 1;

            if (!isNaN(P) && P > 0 && P0 > 0) {
                const db = 10 * Math.log10(P / P0);
                const ratio = P / P0;

                powDB.value = db.toFixed(2);
                powRatio.textContent = ratio.toFixed(4);
            }

            updateInProgress = false;
        });

        powRef.addEventListener('input', () => {
            if (powLinear.value) powLinear.dispatchEvent(new Event('input'));
        });

        powDB.addEventListener('input', () => {
            if (updateInProgress) return;
            updateInProgress = true;

            const db = parseFloat(powDB.value);
            const P0 = parseFloat(powRef.value) || 1;

            if (!isNaN(db) && P0 > 0) {
                const ratio = Math.pow(10, db / 10);
                const P = ratio * P0;

                powLinear.value = P.toFixed(6);
                powRatio.textContent = ratio.toFixed(4);
            }

            updateInProgress = false;
        });

        // Quick reference setter
        function setDB(dbValue) {
            ampDB.value = dbValue;
            powDB.value = dbValue;
            ampDB.dispatchEvent(new Event('input'));
            powDB.dispatchEvent(new Event('input'));
        }

        // Initialize with 0 dB
        setDB(0);
    </script>
</body>
</html>
